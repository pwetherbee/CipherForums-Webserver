export const state = {
  key: "",
  author: "",
  comments: [],
};

export const getForum = async function (
  id,
  url = "http://localhost:3000/api/threads"
) {
  console.log(id);
  const res = await fetch(`${url}/${id}`);
  if (!res.ok) {
    throw new Error("ID not found");
  }
  const data = await res.json();
  console.log(data);
  state.author = data.author;
  state.comments = data.comments;
  return data;
};

export const postComment = async function (
  comment,
  url = "http://localhost:3000/api/threads/999"
) {
  console.log(JSON.stringify({ foo: "bar" }));
  const fetchPro = await fetch(url, {
    method: "POST",
    headers: {
      Accept: "application/json",
      "Content-Type": "application/json",
    },
    body: JSON.stringify(comment),
  });
  state.comments.push(comment);
  // const res = await Promise.race([fetchPro, timeout(1000)]);
  // if (!res.ok) {
  // }
  // const res = await Promise.race([fetchPro]);
};

// let thread1 = [
//   "7f741c422a0a640a08312043405371345970035e2d7442435b090b444375767e5c717d536444705c473a086a67077b744336480c534411535352530a0204034b",
//   "5d7c2049170f51371c2532784072543c6a542f7a2e44514d5c450e504152185b40175712535d5f5f520c111e1118584547415e004c4d425b471708594b4a4f4b",
//   "5b4402771d2d5f01092e3b545b7775015d6232431e597e6c6327104645524d4e50585b5f555c4612540d085f540f4310560e590c5359161257580f55545e424b",
// ];

// let thread2 = [
//   "7c67096225377e162f0d00506179590a4859306d3d4b405b750f306d50644d7e7962415c614e5a574e42005c52134e4041085b0f165e11125656065c5043454b",
//   "5a7928680b0c61252309104d787d4e3d465e1a5d0550555c52451150135559515847445d5740535f5a070112430453545c151841525207481459174c4211164b",
//   "6e5a0d62022c6e24102608415a485c12454e1250174c14575c080b505d43185a56455313105c5d465f0b0b5511155810590e5b0a165616125d1711594811164b",
//   "407b294a0211520526061d5f57495745445a0f4644555147400401501340594113525851424b42465206454558155f104109514152520453415b16675a554f4b",
// ];

// let thread3 = [
//   "636712702b1044250e0e1444745b5d27537c0c643c7d7b505b19145a505c18535d5316405f5e5e125c0700424241455f560a5d0f16560c5614450d545d59584b",
//   "535f127d02046300370f137c4476440d515a075d05185b5c1308075b1343505b40175f4110531251580f08575f151b10420e410d521016124d56424b5049094b",
//   "67660e743e3b6011130f16707a695233576808573c6b415c46152f614073794e43564453545d4a120a42115a5812175946415a0e4217031257580f55545e424b",
// ];
